{% extends "base.html" %}
{% block content %}
<h1 style="margin-bottom: 2rem;">Access Requests</h1>

{% if requests %}
<ul class="request-list">
    {% for req in requests %}
    <li class="request-item">
        <div class="file-info">
            <h3>{{ req.requester_email }}</h3>
            <p>Requested access to <strong>{{ req.original_name }}</strong> on {{ req.request_date }}</p>
            <p>Status: <span class="status-{{ req.status }}">{{ req.status }}</span></p>
        </div>
        {% if req.status == 'pending' %}
        <div class="file-actions">
            <form action="{{ url_for('share_service.handle_request', req_id=req.id, action='approve') }}" method="POST">
                <button type="submit" class="btn btn-sm">Approve</button>
            </form>
            <form action="{{ url_for('share_service.handle_request', req_id=req.id, action='deny') }}" method="POST">
                <button type="submit" class="btn btn-sm btn-danger">Deny</button>
            </form>
        </div>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<div class="card" style="text-align:center; padding: 4rem 2rem;">
    <h3 style="color:var(--text-muted);">No requests</h3>
    <p>There are currently no access requests for your shared files.</p>
</div>
{% endif %}
{% endblock %}